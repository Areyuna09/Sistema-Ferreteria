<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ferreteria.controllers.SalesController" styleClass="dashboard-root">

    <!-- Navbar Superior -->
    <top>
        <fx:include fx:id="navbar" source="components/Navbar.fxml"/>
    </top>

    <!-- Contenido Principal -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="scroll-pane">
            <VBox styleClass="main-content" spacing="20" minHeight="600">
                <padding>
                    <Insets top="24" right="24" bottom="24" left="24"/>
                </padding>

                <!-- Header de Pagina -->
                <HBox alignment="CENTER_LEFT" spacing="16">
                    <VBox HBox.hgrow="ALWAYS" spacing="4">
                        <Label text="Gestión de Ventas" styleClass="page-title"/>
                        <Label text="Historial de ventas y punto de venta" styleClass="page-subtitle"/>
                    </VBox>
                    <Button mnemonicParsing="false" onAction="#handleNuevaVenta" styleClass="action-button primary" text="+ Nueva Venta" />
                </HBox>

                <!-- Estadísticas -->
                <HBox spacing="16" alignment="CENTER">
                    <VBox styleClass="stat-card card-green" HBox.hgrow="ALWAYS">
                        <Label text="DINERO" styleClass="card-icon"/>
                        <Label fx:id="ventasHoyLabel" text="0.00" styleClass="card-value"/>
                        <Label text="Ventas de Hoy" styleClass="card-label"/>
                    </VBox>
                    <VBox styleClass="stat-card card-blue" HBox.hgrow="ALWAYS">
                        <Label text="VENTAS" styleClass="card-icon"/>
                        <Label fx:id="ventasMesLabel" text="0.00" styleClass="card-value"/>
                        <Label text="Ventas del Mes" styleClass="card-label"/>
                    </VBox>
                    <VBox styleClass="stat-card card-purple" HBox.hgrow="ALWAYS">
                        <Label text="CANT" styleClass="card-icon"/>
                        <Label fx:id="cantidadHoyLabel" text="0" styleClass="card-value"/>
                        <Label text="Ventas Hoy" styleClass="card-label"/>
                    </VBox>
                    <VBox styleClass="stat-card card-orange" HBox.hgrow="ALWAYS">
                        <Label text="PROM" styleClass="card-icon"/>
                        <Label fx:id="promedioLabel" text="0.00" styleClass="card-value"/>
                        <Label text="Promedio" styleClass="card-label"/>
                    </VBox>
                </HBox>

                <!-- Filtros -->
                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <DatePicker fx:id="fechaDesde" promptText="Fecha desde" styleClass="form-field"/>
                        <DatePicker fx:id="fechaHasta" promptText="Fecha hasta" styleClass="form-field"/>
                        <ComboBox fx:id="statusFilter" prefWidth="150" promptText="Estado" styleClass="form-combo"/>
                        <TextField fx:id="searchField" prefWidth="300" promptText="Buscar producto..." styleClass="form-field"/>
                        <Button mnemonicParsing="false" onAction="#handleFiltrar" styleClass="action-button" text="Filtrar" />
                        <Button mnemonicParsing="false" onAction="#handleLimpiarFiltros" styleClass="action-button secondary" text="Limpiar" />
                    </HBox>
                </VBox>

                <!-- Tabla de Ventas -->
                <TableView fx:id="ventasTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                    <columns>
                       <TableColumn fx:id="colId" prefWidth="80" text="ID" />
                       <TableColumn fx:id="colFecha" prefWidth="150" text="Fecha" />
                       <TableColumn fx:id="colProductos" prefWidth="200" text="Productos" />
                       <TableColumn fx:id="colVendedor" prefWidth="120" text="Vendedor" />
                       <TableColumn fx:id="colTotal" prefWidth="100" text="Total" />
                       <TableColumn fx:id="colEstado" prefWidth="100" text="Estado" />
                       <TableColumn fx:id="colAcciones" prefWidth="150" text="Acciones" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

                <!-- Paginación -->
                <HBox alignment="CENTER" spacing="16">
                    <Button fx:id="btnAnterior" mnemonicParsing="false" onAction="#handlePaginaAnterior" styleClass="action-button secondary" text="← Anterior" />
                    <Label fx:id="paginaLabel" styleClass="pagination-label" text="Página 1 de 1" />
                    <Button fx:id="btnSiguiente" mnemonicParsing="false" onAction="#handlePaginaSiguiente" styleClass="action-button secondary" text="Siguiente →" />
                </HBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
